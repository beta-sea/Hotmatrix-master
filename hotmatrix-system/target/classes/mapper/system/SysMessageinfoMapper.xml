<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.benet.system.mapper.SysMessageinfoMapper">
    
    <resultMap type="SysMessageinfo" id="SysMessageinfoResult">
        <result property="id"    column="id"    />
        <result property="mssgNo"    column="mssg_no"    />
        <result property="mssgType"    column="mssg_type"    />
        <result property="mreceiver"    column="mreceiver"    />
        <result property="msender"    column="msender"    />
        <result property="mtitle"    column="mtitle"    />
        <result property="mcontent"    column="mcontent"    />
        <result property="attachfile"    column="attachfile"    />
        <result property="readState"    column="read_state"    />
        <result property="receiveTime"    column="receive_time"    />
        <result property="sendTime"    column="send_time"    />
        <result property="checkState"    column="check_state"    />
        <result property="branchNo"    column="branch_no"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="deleteFlag"    column="delete_flag"    />
        <result property="comments"    column="comments"    />
        <result property="appCode"    column="app_code"    />
        <result property="version"    column="version"    />
    </resultMap>

    <sql id="selectSysMessageinfoVo">
        select id, mssg_no, mssg_type, mreceiver, msender, mtitle, mcontent, attachfile, read_state, receive_time, send_time, check_state, branch_no, create_by, create_time, update_by, update_time, delete_flag, comments, app_code, version from sys_messageinfo
    </sql>

    <select id="getAllRecords" resultMap="SysMessageinfoResult">
        <include refid="selectSysMessageinfoVo"/>
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%')
    </select>

    <select id="getRecordsByClassNo" resultMap="SysMessageinfoResult">
        <include refid="selectSysMessageinfoVo"/>
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and class_no=#{classNo}
    </select>

    <select id="getRecordsByPaging" resultMap="SysMessageinfoResult">
        <include refid="selectSysMessageinfoVo"/>
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and #{condition} order by #{orderField} #{orderType} limit #{pageIndex},#{pageSize}
    </select>

    <select id="getRecordByNo" resultMap="SysMessageinfoResult">
        <include refid="selectSysMessageinfoVo"/>
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no = #{appCode}
    </select>

    <select id="getRecordNameByNo">
        select app_cnname from sys_messageinfo
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no = #{appNo}
    </select>

    <select id="getCountByCondition">
        select count(*) from sys_messageinfo
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%')
        <if test="condition != null  and condition != ''"> and #{condition}</if>
    </select>

    <insert id="insertSysMessageinfo" parameterType="SysMessageinfo" useGeneratedKeys="true" keyProperty="id">
        insert into sys_messageinfo
        <trim prefix="(" suffix=")" suffixOverrides=",">
                                                                            <if test="mssgNo != null  and mssgNo != ''">mssg_no,</if>
                                                                <if test="mssgType != null  and mssgType != ''">mssg_type,</if>
                                                                <if test="mreceiver != null  and mreceiver != ''">mreceiver,</if>
                                                                <if test="msender != null  and msender != ''">msender,</if>
                                                                <if test="mtitle != null  and mtitle != ''">mtitle,</if>
                                                                <if test="mcontent != null  and mcontent != ''">mcontent,</if>
                                                                <if test="attachfile != null  and attachfile != ''">attachfile,</if>
                                                                <if test="readState != null  and readState != ''">read_state,</if>
                                                                <if test="receiveTime != null ">receive_time,</if>
                                                                <if test="sendTime != null ">send_time,</if>
                                                                <if test="checkState != null  and checkState != ''">check_state,</if>
                                                                <if test="branchNo != null  and branchNo != ''">branch_no,</if>
                                                                <if test="createBy != null  and createBy != ''">create_by,</if>
                                                                <if test="createTime != null ">create_time,</if>
                                                                <if test="updateBy != null  and updateBy != ''">update_by,</if>
                                                                <if test="updateTime != null ">update_time,</if>
                                                                <if test="deleteFlag != null  and deleteFlag != ''">delete_flag,</if>
                                                                <if test="comments != null  and comments != ''">comments,</if>
                                                                <if test="appCode != null  and appCode != ''">app_code,</if>
                                                                <if test="version != null ">version,</if>
                                    </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                                                                            <if test="mssgNo != null  and mssgNo != ''">#{mssgNo},</if>
                                                                <if test="mssgType != null  and mssgType != ''">#{mssgType},</if>
                                                                <if test="mreceiver != null  and mreceiver != ''">#{mreceiver},</if>
                                                                <if test="msender != null  and msender != ''">#{msender},</if>
                                                                <if test="mtitle != null  and mtitle != ''">#{mtitle},</if>
                                                                <if test="mcontent != null  and mcontent != ''">#{mcontent},</if>
                                                                <if test="attachfile != null  and attachfile != ''">#{attachfile},</if>
                                                                <if test="readState != null  and readState != ''">#{readState},</if>
                                                                <if test="receiveTime != null ">#{receiveTime},</if>
                                                                <if test="sendTime != null ">#{sendTime},</if>
                                                                <if test="checkState != null  and checkState != ''">#{checkState},</if>
                                                                <if test="branchNo != null  and branchNo != ''">#{branchNo},</if>
                                                                <if test="createBy != null  and createBy != ''">#{createBy},</if>
                                                                <if test="createTime != null ">#{createTime},</if>
                                                                <if test="updateBy != null  and updateBy != ''">#{updateBy},</if>
                                                                <if test="updateTime != null ">#{updateTime},</if>
                                                                <if test="deleteFlag != null  and deleteFlag != ''">#{deleteFlag},</if>
                                                                <if test="comments != null  and comments != ''">#{comments},</if>
                                                                <if test="appCode != null  and appCode != ''">#{appCode},</if>
                                                                <if test="version != null ">#{version},</if>
                                    </trim>
    </insert>

    <update id="updateSysMessageinfo" parameterType="SysMessageinfo">
        update sys_messageinfo
        <trim prefix="SET" suffixOverrides=",">
                                                                            <if test="mssgNo != null  and mssgNo != ''">mssg_no = #{mssgNo},</if>
                                                                <if test="mssgType != null  and mssgType != ''">mssg_type = #{mssgType},</if>
                                                                <if test="mreceiver != null  and mreceiver != ''">mreceiver = #{mreceiver},</if>
                                                                <if test="msender != null  and msender != ''">msender = #{msender},</if>
                                                                <if test="mtitle != null  and mtitle != ''">mtitle = #{mtitle},</if>
                                                                <if test="mcontent != null  and mcontent != ''">mcontent = #{mcontent},</if>
                                                                <if test="attachfile != null  and attachfile != ''">attachfile = #{attachfile},</if>
                                                                <if test="readState != null  and readState != ''">read_state = #{readState},</if>
                                                                <if test="receiveTime != null ">receive_time = #{receiveTime},</if>
                                                                <if test="sendTime != null ">send_time = #{sendTime},</if>
                                                                <if test="checkState != null  and checkState != ''">check_state = #{checkState},</if>
                                                                <if test="branchNo != null  and branchNo != ''">branch_no = #{branchNo},</if>
                                                                <if test="createBy != null  and createBy != ''">create_by = #{createBy},</if>
                                                                <if test="createTime != null ">create_time = #{createTime},</if>
                                                                <if test="updateBy != null  and updateBy != ''">update_by = #{updateBy},</if>
                                                                <if test="updateTime != null ">update_time = #{updateTime},</if>
                                                                <if test="deleteFlag != null  and deleteFlag != ''">delete_flag = #{deleteFlag},</if>
                                                                <if test="comments != null  and comments != ''">comments = #{comments},</if>
                                                                <if test="appCode != null  and appCode != ''">app_code = #{appCode},</if>
                                                                <if test="version != null ">version = #{version},</if>
                                    </trim>
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and version=#{version} and app_no = #{appNo}
    </update>

    <delete id="HardDeleteRecord">
        delete from sys_messageinfo
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no = #{appNo}
    </delete>

    <delete id="HardDeleteByNos">
        delete from sys_messageinfo
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no in
        <foreach item="no" collection="array" open="(" separator="," close=")">
            #{no}
        </foreach>
    </delete>

    <delete id="HardDeleteByCondition">
        delete from sys_messageinfo
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%')
        <if test="condition != null  and condition != ''"> and #{condition}</if>
    </delete>

    <delete id="SoftDeleteRecord">
        update sys_messageinfo set delete_flag='0'
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no = #{appNo}
    </delete>

    <delete id="SoftDeleteByNos">
        update sys_messageinfo set delete_flag='0'
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%') and app_no in
        <foreach item="no" collection="array" open="(" separator="," close=")">
            #{no}
        </foreach>
    </delete>

    <delete id="SoftDeleteByCondition">
        update sys_messageinfo set delete_flag='0'
        where delete_flag='1' and app_code like concat('%', #{appCode}, ';%')
        <if test="condition != null  and condition != ''"> and #{condition}</if>
    </delete>
    
</mapper>